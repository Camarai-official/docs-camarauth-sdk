---
title: "Core"
description: "Utilidades core del SDK de Camarauth"
---

# Core

El paquete `@camarauth/sdk` incluye utilidades core que puedes usar independientemente del framework.

## Funciones disponibles

### GeneraciÃ³n de PINs

```typescript
import {
  generatePin,
  encodePinToEmojis,
  generatePinWithEmojis,
} from "@camarauth/sdk";

// Generar PIN simple
const pin = generatePin({ length: 6 });
console.log(pin); // "ABC123"

// Codificar en emojis
const emojis = encodePinToEmojis(pin);
console.log(emojis); // ["ğŸ”", "ğŸ”‘", "ğŸ”’", "ğŸ”“", "ğŸ—ï¸", "ğŸ›¡ï¸"]

// Todo en uno
const result = generatePinWithEmojis();
console.log(result.pin); // "ABC123"
console.log(result.emojis); // ["ğŸ”", "ğŸ”‘", "ğŸ”’", ...]
console.log(result.emojiString); // "ğŸ”ğŸ”‘ğŸ”’..."
```

### CodificaciÃ³n de emojis

```typescript
import {
  encodeTextToEmojis,
  decodeEmojiChunk,
  decodeEmojisFull,
} from "@camarauth/sdk";

// Codificar texto
const encoded = encodeTextToEmojis("ğŸ˜€", "A");
console.log(encoded); // "ğŸ˜€ó „€" (emoji con variante)

// Decodificar
const decoded = decodeEmojiChunk("ğŸ˜€ó „€");
console.log(decoded); // "A"

// Decodificar string completo
const fullDecoded = decodeEmojisFull("ğŸ˜€ó „€ğŸ˜ó „");
console.log(fullDecoded); // "AB"
```

### Utilidades de tiempo

```typescript
import { formatTime } from "@camarauth/sdk";

// Formatear segundos a MM:SS
const formatted = formatTime(175);
console.log(formatted); // "02:55"

const formatted2 = formatTime(60);
console.log(formatted2); // "01:00"
```

### Links de WhatsApp

```typescript
import {
  generateWhatsAppLink,
  generateQRCodeUrl,
  generateAuthLink,
} from "@camarauth/sdk";

// Generar link de WhatsApp
const link = generateWhatsAppLink({
  phoneNumber: "+1234567890",
  message: "Hola, mi cÃ³digo es ğŸ”ğŸ”‘",
});

// Generar QR
const qrUrl = generateQRCodeUrl(link);

// Todo en uno (mÃ¡s usado)
const auth = generateAuthLink("+1234567890", "ğŸ”ğŸ”‘ğŸ”’ğŸ”“", { includeQR: true });
console.log(auth.whatsappLink); // Link de WA
console.log(auth.qrCodeUrl); // URL del QR
console.log(auth.fullMessage); // Mensaje completo
```

### Utilidades JWT

```typescript
import { decodeToken, isTokenExpired, getUserFromToken } from "@camarauth/sdk";

// Decodificar token
const payload = decodeToken(token);
console.log(payload.sub); // user ID

// Verificar expiraciÃ³n
if (isTokenExpired(token)) {
  // Refrescar token
}

// Obtener usuario
const user = getUserFromToken(token);
console.log(user.name);
```

### Storage

```typescript
import { createAuthStorage } from "@camarauth/sdk";

const storage = createAuthStorage({
  storage: localStorage,
  key: "camarauth",
});

// Guardar
await storage.save({
  token: "jwt-token",
  user: { id: "123", name: "Juan" },
});

// Recuperar
const data = await storage.load();

// Limpiar
await storage.clear();
```

## Clases de error

```typescript
import {
  CamarauthError,
  PinExpiredError,
  AuthenticationError,
  NetworkError,
  ValidationError,
} from "@camarauth/sdk";

try {
  // ... cÃ³digo
} catch (error) {
  if (error instanceof PinExpiredError) {
    console.log("PIN expirado");
  } else if (error instanceof AuthenticationError) {
    console.log("AutenticaciÃ³n fallida");
  }
}
```

## Uso en Node.js

Todas estas utilidades funcionan en Node.js:

```typescript
// server.ts
import { generatePin, encodePinToEmojis } from "@camarauth/sdk";

function createAuthCode() {
  const result = generatePinWithEmojis({ length: 6 });
  return {
    code: result.pin,
    display: result.emojiString,
  };
}
```

## Uso en navegador

TambiÃ©n funcionan en el navegador:

```typescript
// client.ts
import { generateWhatsAppLink } from "@camarauth/sdk";

const link = generateWhatsAppLink({
  phoneNumber: "+1234567890",
  message: "Mi cÃ³digo: ğŸ”ğŸ”‘",
});

window.open(link, "_blank");
```

## InstalaciÃ³n standalone

Si solo necesitas las utilidades core (sin React o Node.js server):

```bash
npm install @camarauth/sdk
```

Y usa solo las importaciones que necesites.

## VÃ©ase tambiÃ©n

- [Pin Generator](/core/pin-generator)
- [Emoji Encoder](/core/emoji-encoder)
- [Errors](/core/errors)
