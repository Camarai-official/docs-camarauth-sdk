---
title: "PinData"
description: "Estructura de datos para un PIN de autenticaci贸n"
---

# PinData

Representa un PIN de autenticaci贸n en el sistema.

## Propiedades

### id

Identificador 煤nico del PIN.

<ParamField path="id" type="string">
  ID 煤nico generado autom谩ticamente
</ParamField>

```typescript
id: "a1b2c3d4e5f6g7";
```

### pin

El c贸digo PIN en texto plano.

<ParamField path="pin" type="string">
  PIN de autenticaci贸n
</ParamField>

```typescript
pin: "ABC123";
```

### emojiString

El PIN codificado en emojis.

<ParamField path="emojiString" type="string">
  PIN representado como string de emojis
</ParamField>

```typescript
emojiString: "";
```

### status

Estado actual del PIN.

<ParamField path="status" type="'pending' | 'verified'">
  Estado del PIN
</ParamField>

```typescript
status: "pending"; // Esperando verificaci贸n
status: "verified"; // Verificado exitosamente
```

### userId

ID del usuario asociado (asignado despu茅s de la verificaci贸n).

<ParamField path="userId" type="string | undefined">
  ID del usuario que verific贸 el PIN
</ParamField>

### phoneNumber

N煤mero de tel茅fono que verific贸 el PIN.

<ParamField path="phoneNumber" type="string | undefined">
  Tel茅fono del usuario en formato internacional
</ParamField>

```typescript
phoneNumber: "+1234567890";
```

### socketId

ID del socket de Socket.IO que registr贸 el PIN.

<ParamField path="socketId" type="string | undefined">
  ID del socket del cliente
</ParamField>

### expiresAt

Timestamp de expiraci贸n (milisegundos desde epoch).

<ParamField path="expiresAt" type="number">
  Momento en que expira el PIN
</ParamField>

```typescript
expiresAt: 1704067200000;
```

### createdAt

Timestamp de creaci贸n (milisegundos desde epoch).

<ParamField path="createdAt" type="number">
  Momento en que se cre贸 el PIN
</ParamField>

### userData

Datos del usuario (asignado despu茅s de la verificaci贸n).

<ParamField path="userData" type="any">
  Informaci贸n completa del usuario
</ParamField>

```typescript
userData: {
  id: "user_123",
  name: "Juan",
  surname: "P茅rez",
  phone: "+1234567890",
  roles: ["user"]
}
```

### accessToken

Token JWT de acceso (asignado despu茅s de la verificaci贸n).

<ParamField path="accessToken" type="string | undefined">
  Token JWT para acceder a recursos protegidos
</ParamField>

### refreshToken

Token JWT de refresco (asignado despu茅s de la verificaci贸n).

<ParamField path="refreshToken" type="string | undefined">
  Token para obtener nuevos access tokens
</ParamField>

## Ciclo de vida de un PIN

```
1. CREACIN
   id, pin, emojiString, status='pending', expiresAt, createdAt

2. VERIFICACIN
   + userId, phoneNumber, userData
   + accessToken, refreshToken
   status='verified'

3. EXPIRACIN / LIMPIEZA
   El PIN se elimina del Map despu茅s de 5 segundos de verificaci贸n
   o cuando expira el tiempo
```

## Ejemplo de uso

```typescript
import { CamarauthBackend } from "@camarauth/sdk/server";

const backend = new CamarauthBackend({
  /* config */
});

// Obtener PINs activos
const pins = backend.getPins();

for (const [pin, data] of pins) {
  console.log({
    pin: data.pin,
    status: data.status,
    expiresIn: data.expiresAt - Date.now(),
    phoneNumber: data.phoneNumber || "N/A",
  });
}
```

## V茅ase tambi茅n

- [BackendConfig interface](/backend/interfaces/backend-config)
- [CamarauthBackend class](/backend/classes/camarauth-backend)
